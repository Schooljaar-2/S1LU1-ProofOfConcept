<div class="container pt-2 pb-5">
    <!-- Removed page title for tighter layout -->
    <form class="bg-dark p-3 rounded shadow mb-3 w-100" style="margin-left: 0;">
        <div class="row g-3 align-items-end w-100">
            <div class="col-12 col-md-3">
                <label for="searchTitle" class="form-label text-light">Title</label>
                <input type="text" class="form-control" id="searchTitle" name="title" placeholder="Search by title">
            </div>
            <div class="col-12 col-md-3">
                <label for="searchCategory" class="form-label text-light">Category</label>
                <select class="form-select" id="searchCategory" name="category">
                    <option value="">All Categories</option>
                    {{#each categories}}
                    <option value="{{this.name}}">{{this.name}}</option>
                    {{/each}}
                </select>
            </div>
            <div class="col-12 col-md-2">
                <label for="searchRating" class="form-label text-light">Rating</label>
                <select class="form-select" id="searchRating" name="rating">
                    <option value="">All Ratings</option>
                    {{#each ratings}}
                    <option value="{{this.rating}}">{{this.rating}}</option>
                    {{/each}}
                </select>
            </div>
            <div class="col-12 col-md-4 d-flex align-items-end gap-2 justify-content-end">
                <div class="flex-grow-1">
                    <label for="searchSort" class="form-label text-light">Sort By</label>
                    <select class="form-select" id="searchSort" name="sort">
                        <option value="0">Title (A-Z)</option>
                        <option value="1">Title (Z-A)</option>
                        <option value="2">Release Year (Ascending)</option>
                        <option value="3">Release Year (Descending)</option>
                        <option value="4">Rental Rate (Ascending)</option>
                        <option value="5">Rental Rate (Descending)</option>
                        <option value="6">Movie Length (Ascending)</option>
                        <option value="7">Movie Length (Descending)</option>
                    </select>
                </div>
                <div class="d-flex gap-2">
                    <button type="submit" class="btn btn-warning fw-bold">Apply</button>
                    <button type="reset" class="btn btn-secondary fw-bold">Clear</button>
                </div>
            </div>
        </div>
    </form>

    <!-- Movies Table: Shows up to 10 movies -->
    <table class="table table-dark table-hover align-middle mt-2" style="background-color: #181818; color: #fff;">
        <thead class="table-dark">
            <tr>
                <th scope="col" class="text-white">Poster</th>
                <th scope="col" class="text-white">Title</th>
                <th scope="col" class="text-white">Year</th>
                <th scope="col" class="text-white">Length</th>
                <th scope="col" class="text-white">Rating</th>
                <th scope="col" class="text-white">Categories</th>
                <th scope="col" class="text-white"></th>
            </tr>
        </thead>
        <tbody>
            {{#each movies}}
                <tr>
                    <td style="width: 80px;">
                        {{#if image_url}}
                            {{#if image_url.length}}
                                <img src="{{image_url}}" alt="Poster" class="img-fluid rounded" style="max-width: 60px; max-height: 60px;">
                            {{else}}
                                <img src="/images/imageNotFound.png" alt="No Image" class="img-fluid rounded" style="max-width: 60px; max-height: 60px;">
                            {{/if}}
                        {{else}}
                            <img src="/images/imageNotFound.png" alt="No Image" class="img-fluid rounded" style="max-width: 60px; max-height: 60px;">
                        {{/if}}
                    </td>
                    <td class="text-white"><strong>{{title}}</strong></td>
                    <td class="text-white">{{release_year}}</td>
                    <td class="text-white">{{length}} min</td>
                    <td class="text-white">{{rating}}</td>
                    <td class="text-white">{{categories}}</td>
                    <td class="text-end">
                        <a href="/movies/{{film_id}}" class="btn btn-warning btn-sm">See more</a>
                    </td>
                </tr>
            {{/each}}
        </tbody>
    </table>
</div>